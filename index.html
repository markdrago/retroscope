<!DOCTYPE html>

<html>
<head>
<title>Retroscope</title>

<link rel="stylesheet" type="text/css" href="style.css" />
<script type="text/javascript" src="src/lib/jquery.min.js"></script>

<script type="text/javascript" src="src/captor.js"></script>
<script type="text/javascript" src="src/buffer.js"></script>
<script type="text/javascript" src="src/dispatcher.js"></script>
<script type="text/javascript" src="src/layout.js"></script>
<script type="text/javascript" src="src/mainloop.js"></script>
<script type="text/javascript" src="src/scoreboard.js"></script>
<script type="text/javascript" src="src/ui_events.js"></script>

<script type="text/javascript">
$(document).ready(function() {
    var scoreboard = new ScoreBoard();
    var uievents = new UiEvents(scoreboard);

    var captor = new Captor(scoreboard, uievents);
    var buffer = new Buffer(scoreboard);
    var dispatcher = new Dispatcher(buffer);

    var layout = new Layout();
    layout.set_dimensions();

    var mainloop = new MainLoop(captor, buffer, dispatcher, scoreboard);
    mainloop.run();
});
</script>

</head>
<body>
    <div id="images">
        <div class="box">
            <img class="delay" data-delay="2" />
            <div class="meta">
              <span class="delaylabel"></span>
            </div>
        </div>
        <div class="box">
            <img class="delay" data-delay="4"/>
            <div class="meta">
              <span class="delaylabel"></span>
            </div>
        </div>

        <br />

        <div class="box">
            <img class="delay" data-delay="6"/>
            <div class="meta">
              <span class="delaylabel"></span>
            </div>
        </div>
        <div class="box">
            <img class="delay" data-delay="8"/>
            <div class="meta">
              <span class="delaylabel"></span>
            </div>
        </div>
    </div>

    <div id="sidebar">
    <a id="toggle_about">About</a>
    &nbsp;&nbsp; | &nbsp;&nbsp;
    <a id="toggle_debug">Debug</a>
    </div>

    <div id="debug" style="display: none">
      FPS: <span id="fps">0</span><br />
      FPS Possible: <span id="fps_limit">0</span><br />
      Wait Time: <span id="wait_time">0</span> ms<br />
      Loop Diff from Desired: <span id="loop_diff_from_desired">0</span> ms<br />
      <br />
      Frame Time: <span id="total_frame_time">0</span> ms<br />
      Total Captor Time: <span id="captor_time">0</span> ms<br />
      Copy To Canvas Time: <span id="copy_to_canvas_time">0</span> ms<br />
      To Data URL Time: <span id="to_data_url_time">0</span> ms<br />
      Update Display Time: <span id="update_display_time">0</span> ms<br />
      <br />
      Buffer in Memory: <span id="buffer_in_memory">0</span> MB<br />
    </div>

    <div id="about">
      <h2>Retroscope</h2>
      The retroscope uses your webcam to show you what happened a
      little while ago.  It does not send the video anywhere at all -
      it is all stored locally on your computer.
      Here are some uses for the retroscope:
      <ul>
        <li>Add some fun to your office</li>
        <li>Leave it running during a party</li>
        <li>Entertain a toddler for a while</li>
        <li>Watch replays of charades</li>
      </ul>
      <br />
      I'm sure there are many uses which I haven't thought of yet.
      You can control how far in to the past you watch by clicking on
      the label of each video and changing the delay.
      <br /><br />
      <h2>Technology</h2>
      The retroscope uses some new and fun browser tech:
      <ul>
        <li>getUserMedia</li>
        <li>canvas</li>
        <li>data URLs</li>
        <li>filesystem API (coming soon)</li>
      </ul>
      <br />
      <h2>Plug</h2>
      Are you a software enginner that finds this retroscope thing to
      be interesting and fun?  Then why don't you come and chat with
      me about it while <a href="http://www.yodlecareers.com/departments/technology/">interviewing at Yodle</a>?
    </div>
</body>
</html>
